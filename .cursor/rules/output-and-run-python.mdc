---
description: Crucial rules for local Python execution, Poetry environment, Windows powershell requirements, and text output formatting.
alwaysApply: true
---

## Output Rules
- Do NOT use LaTeX format for output â€” it is not properly rendered.
- Use markdown format with all necessary formatting (bold, italic, headers, lists, code blocks).
- Do not generate intermediate markdown files with summaries unless explicitly asked; use `agent_memory/` for intermediate files if needed.

## Local Windows 11 Development Environment
- **OS**: Windows 11
- **Hardware**: 64GB RAM, RTX 3080 laptop GPU (10GB VRAM), Ryzen 9 5900HX
- **Project Root**: `C:\Users\krzys\Dev Projects\MrCogito`

## Windows Local Machine Rules for Python Code
- Always use PowerShell (`.ps1`) scripts for local runs, not bash.
- Use double quotes for paths with spaces: `"C:\Users\krzys\Dev Projects\MrCogito"`.
- Environment variables set in PowerShell: `$env:WANDB_API_KEY = "..."`.
- Local Training scripts: `scripts/train_weighted_mlm.ps1`, `scripts/train_perceiver_mlm.ps1`.

## Python & Poetry Setup
- Python **3.12** managed via **Poetry**.
- Virtual environment: `mrcogito-sHhaXiEk-py3.12`.
- **Run Python code always inside the poetry env:**
  ```powershell
  # Option 1: run directly
  poetry run python training/mlm_training.py [args]

  # Option 2: use the virtualenv Python directly
  C:\Users\krzys\AppData\Local\pypoetry\Cache\virtualenvs\mrcogito-sHhaXiEk-py3.12\Scripts\python.exe script.py
  ```

## Key Dependencies (pyproject.toml)
- `torch` ^2.9.0 (CUDA 12.8 wheels)
- `transformers`, `datasets`, `accelerate` (distributed training)
- `wandb` (Experiment tracking)
- `evaluate` (GLUE benchmark metrics)

## Running Tests
```powershell
# Run all tests
poetry run pytest tests/
# Run specific test file
poetry run pytest tests/test_recursive_mlm.py -v
```

## WandB Configuration
- **Project name**: `"MrCogito"`
- API key stored in `.env` file (gitignored).
- Run naming convention: `[dataset]-[task]-[model]`.
